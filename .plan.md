# Status Message History & Timeout Feature

## Overview
Add a status message history system that:
1. Stores all status messages with timestamps
2. Auto-clears the current status message after a timeout (e.g., 5 seconds)
3. Shows keyboard shortcuts when no status message is displayed
4. Provides a way to view message history (press `H` for history)

## Current Behavior
- `setStatus(msg, isError)` sets `statusMessage` and `statusIsError`
- Footer shows status message if set, otherwise shows keyboard shortcuts
- Status messages persist indefinitely until replaced

## Proposed Changes

### 1. Model Changes (`internal/tui/model.go`)

Add new fields:
```go
// Status message with history
statusMessage     string
statusIsError     bool
statusSetAt       time.Time           // When current status was set
statusHistory     []StatusHistoryItem // History of all messages
statusTimeout     time.Duration       // Default 5 seconds
```

Add new type:
```go
type StatusHistoryItem struct {
    Message   string
    IsError   bool
    Timestamp time.Time
}
```

### 2. Message Types (`internal/tui/messages.go`)

Add new view and message:
```go
const ViewStatusHistory View = iota + 500

type StatusTimeoutMsg struct{}
```

### 3. Update `setStatus` Function (`internal/tui/model.go`)

Modify to:
1. Store the message in history (max 50 items)
2. Set `statusSetAt` to current time
3. Return a command to trigger timeout

### 4. Update Function Changes (`internal/tui/update.go`)

Handle `StatusTimeoutMsg`:
- Check if `statusSetAt + statusTimeout` has passed
- If so, clear `statusMessage`
- This restores keyboard shortcuts display

Modify all `setStatus` calls to chain the timeout command.

### 5. View Changes (`internal/tui/view.go`)

Add `ViewStatusHistory` rendering:
- Show scrollable list of recent messages
- Show timestamp, message type (error/info), and content
- Most recent at top

### 6. Key Binding (`internal/tui/keys/keys.go`)

Add `StatusHistory` key binding (capital `H`).

## Implementation Steps

1. Add `StatusHistoryItem` type and model fields
2. Add `StatusTimeoutMsg` message type and `ViewStatusHistory` constant
3. Modify `setStatus` to save history and return timeout command
4. Add timeout message handler in Update()
5. Add key handler for `H` to show history
6. Add history view handler and renderer
7. Update Init() to set default timeout duration

## File Changes

- `internal/tui/model.go` - Add fields and types, modify setStatus
- `internal/tui/messages.go` - Add ViewStatusHistory, StatusTimeoutMsg
- `internal/tui/update.go` - Add timeout handler, history view handler
- `internal/tui/view.go` - Add history page renderer
- `internal/tui/keys/keys.go` - Add StatusHistory key binding

## Timeout Behavior

- Default timeout: 5 seconds for regular messages, 8 seconds for errors
- Timeout starts when message is set
- If user triggers a new message before timeout, timer resets
- When timeout fires, message clears and shortcuts reappear
